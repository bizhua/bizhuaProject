!function(e,t){function i(){var t=n.getBoundingClientRect().width;t/m>780&&(t=780*m);var i=t/10;n.style.fontSize=i+"px",s.rem=e.rem=i}var a,r=e.document,n=r.documentElement,o=r.querySelector('meta[name="viewport"]'),l=r.querySelector('meta[name="flexible"]'),m=0,d=0,s=t.flexible||(t.flexible={}),p=e.navigator.appVersion.match(/android/gi),c=e.navigator.appVersion.match(/iphone/gi);if(o){console.warn("将根据已有的meta标签来设置缩放比例");var u=o.getAttribute("content").match(/initial\-scale=([\d\.]+)/);u&&(d=parseFloat(u[1]),m=parseInt(1/d))}else if(l){var f=l.getAttribute("content");if(f){var v=f.match(/initial\-dpr=([\d\.]+)/),h=f.match(/maximum\-dpr=([\d\.]+)/);v&&(m=parseFloat(v[1]),d=parseFloat((1/m).toFixed(2))),h&&(m=parseFloat(h[1]),d=parseFloat((1/m).toFixed(2)))}}if(!m&&!d){var x=e.devicePixelRatio;m=c?x>=3&&(!m||m>=3)?3:x>=2&&(!m||m>=2)?2:1:1,d=1/m}if(n.setAttribute("data-dpr",m),!o){var w=p?"width=device-width,":"";if(o=r.createElement("meta"),o.setAttribute("name","viewport"),o.setAttribute("content",w+"initial-scale="+d+", maximum-scale="+d+", minimum-scale="+d+", user-scalable=no"),n.firstElementChild)n.firstElementChild.appendChild(o);else{var b=r.createElement("div");b.appendChild(o),r.write(b.innerHTML)}}e.addEventListener("resize",function(){clearTimeout(a),a=setTimeout(i,300)},!1),e.addEventListener("pageshow",function(e){e.persisted&&(clearTimeout(a),a=setTimeout(i,300))},!1),"complete"===r.readyState?r.body.style.fontSize=12*m+"px":r.addEventListener("DOMContentLoaded",function(e){r.body.style.fontSize=12*m+"px"},!1),i(),s.dpr=e.dpr=m,s.refreshRem=i,s.rem2px=function(e){var t=parseFloat(e)*this.rem;return"string"==typeof e&&e.match(/rem$/)&&(t+="px"),t},s.px2rem=function(e){var t=parseFloat(e)/this.rem;return"string"==typeof e&&e.match(/px$/)&&(t+="rem"),t}}(window,window.lib||(window.lib={}));